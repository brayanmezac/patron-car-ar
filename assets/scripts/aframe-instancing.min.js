!function(t){function e(o){if(r[o])return r[o].exports;var a=r[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register beforeAFRAME was available.");AFRAME.registerComponent("instancing",{schema:{count:{type:"int",default:1e4},frustumCulled:{default:!1}},init:function(){this.count=this.data.count,this.model=null},update:function(){if(null===this.model){var t=(this.data,this.el),e=this.count,r=new THREE.InstancedBufferGeometry;r.copy(new THREE.SphereBufferGeometry(5));for(var o=new Float32Array(3*e),a=new Float32Array(3*e),n=new Float32Array(3*e),i=0;i<e;i++)o[3*i+0]=100*(Math.random()-.5),o[3*i+1]=100*(Math.random()-.5),o[3*i+2]=100*(Math.random()-.5);for(var i=0;i<e;i++)a[3*i+0]=100*(Math.random()-.5),a[3*i+1]=100*(Math.random()+1.5),a[3*i+2]=100*(Math.random()-.5);for(var i=0;i<e;i++)n[3*i+0]=Math.random(),n[3*i+1]=Math.random(),n[3*i+2]=Math.random();r.setAttribute("translate",new THREE.InstancedBufferAttribute(o,3,!1)),r.setAttribute("vector",new THREE.InstancedBufferAttribute(a,3,!1)),r.setAttribute("color",new THREE.InstancedBufferAttribute(n,3,!1));var l=new THREE.ShaderMaterial({uniforms:{time:{value:0}},vertexShader:["attribute vec3 translate;","attribute vec3 vector;","attribute vec3 color;","uniform float time;","varying vec3 vColor;","const float g = 9.8 * 1.5;","void main() {","  vec3 offset;","  offset.xz = vector.xz * time;","  offset.y = vector.y * time - 0.5 * g * time * time;","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position + translate + offset, 1.0 );","  vColor = color;","}"].join("\n"),fragmentShader:["varying vec3 vColor;","void main() {","  gl_FragColor = vec4( vColor, 1.0 );","}"].join("\n")}),u=new THREE.Mesh(r,l);u.frustumCulled=this.data.frustumCulled,this.model=u,t.setObject3D("mesh",u),t.emit("model-loaded",{format:"mesh",model:u})}},tick:function(t,e){if(null!==this.model){var r=this.model;r.material.uniforms.time.value=(r.material.uniforms.time.value+e/1e3)%30}}})}]);